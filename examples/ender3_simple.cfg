#####################################################################
##  LUMEN 1.4.4 Configuration - Ender 3 / Budget Printer Example
##
##  Simple Setup:
##    - Ender 3 (or similar budget printer)
##    - Raspberry Pi (any model, even Pi Zero 2W works)
##    - Single LED strip on GPIO
##    - No MCU-attached LEDs
##
##  This is the simplest possible LUMEN setup:
##    - One LED strip
##    - GPIO driver for smooth effects
##    - Basic state detection
##
#####################################################################

[lumen_settings]
max_brightness: 0.4        # Conservative for small space
temp_floor: 25
bored_timeout: 180         # 3 minutes (shorter for faster printers)
sleep_timeout: 300         # 5 minutes
update_rate: 0.1
update_rate_printing: 5.0
gpio_fps: 60               # Smooth even on Pi Zero 2W
# Macro tracking (v1.2.0) - Uncomment and customize for your macros
# macro_homing: G28
# macro_meshing: BED_MESH_CALIBRATE
# macro_leveling: Z_TILT_ADJUST
# macro_probing: PROBE_CALIBRATE
# macro_paused: PAUSE
# macro_cancelled: CANCEL_PRINT
# macro_filament: M600
# v1.3.0 - Filament state also triggered by filament_switch_sensor detecting runout

#####################################################################
##  EFFECT SETTINGS (Optional - defaults work fine)
#####################################################################

[lumen_effect pulse]
speed: 1.0
min_brightness: 0.2
max_brightness: 0.8

[lumen_effect heartbeat]
speed: 1.2
min_brightness: 0.1
max_brightness: 1.0

[lumen_effect disco]
speed: 3.0
min_sparkle: 1
max_sparkle: 6

[lumen_effect thermal]
temp_source: bed           # Ender 3 has bed temp
start_color: ice
end_color: lava
gradient_curve: 2.0

[lumen_effect progress]
start_color: steel
end_color: matrix
gradient_curve: 1.5

#####################################################################
##  Single LED Strip (GPIO)
#####################################################################

[lumen_group printer_leds]
driver: proxy
gpio_pin: 18               # GPIO 18 (safest choice)
proxy_host: 127.0.0.1
proxy_port: 3769
index_start: 1
index_end: 30              # Typical strip length (adjust for yours)
color_order: GRB           # WS2812B standard
direction: standard

# Simple state-based effects
on_idle: solid white       # Ready to print
on_heating: thermal bed ice orange 2.0  # Shows bed heating
on_printing: solid green   # Green = printing
on_cooldown: solid cyan    # Cyan = cooling down
on_error: heartbeat red    # Red pulse = problem
on_bored: pulse blue       # Gentle blue pulse when idle
on_sleep: off              # Turn off to save power
# v1.2.0 - Macro-triggered states (optional - uncomment if using macro tracking)
# on_homing: pulse azure       # Blue pulse during homing
# on_meshing: comet ice        # Moving ice comet during bed mesh
# on_leveling: pulse orange    # Orange pulse during Z-tilt
# on_probing: pulse purple     # Purple pulse during probe calibration
# on_paused: heartbeat yellow  # Yellow heartbeat when paused
# on_cancelled: solid orange   # Orange when print cancelled
# on_filament: pulse neon_pink # Pink pulse during filament change

#####################################################################
##  BUDGET PRINTER NOTES
#####################################################################

## Minimal Hardware Needed:
##   - WS2812B LED strip (30-60 LEDs typical)
##   - 5V power supply (2A for 30 LEDs, 5A for 60 LEDs)
##   - 3 wires: 5V, GND, Data (to Pi GPIO 18)
##
## Wiring:
##   LED Strip          Raspberry Pi        Power Supply
##   ---------          ------------        ------------
##   DIN        <-----> GPIO 18
##   GND        <-----> GND (pin 6)  <----> PSU GND (common ground!)
##   5V         <--------------------->---- PSU 5V+ (NOT from Pi!)
##
## Important:
##   - DO NOT power LEDs from Pi 5V pin (max 30 LEDs only)
##   - Use external 5V PSU for longer strips
##   - Common ground is CRITICAL (Pi GND to PSU GND)

## GPIO Pin Notes:
##   - GPIO 18 is safest (PWM0, no conflicts)
##   - GPIO 21 works but may conflict with audio
##   - Test with: curl http://127.0.0.1:3769/status

## Performance on Budget Pi:
##   - Pi 4: 60fps smooth, <1% CPU
##   - Pi 3: 60fps works, ~2% CPU
##   - Pi Zero 2W: 60fps works, ~5% CPU (still fine!)

## Troubleshooting:
##   LEDs not lighting?
##     1. Check proxy: sudo systemctl status ws281x-proxy
##     2. Check wiring: common ground connected?
##     3. Try different color_order: RGB instead of GRB
##     4. Check logs: sudo journalctl -u moonraker | grep LUMEN

## Cost-Effective Setup:
##   - WS2812B strip (5m/300 LEDs): ~$15
##   - 5V 10A PSU: ~$10
##   - Total: ~$25 for awesome LED control!

#####################################################################
